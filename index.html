<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Recursos Acad√©micos Comit√© Medicina | UNICH</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #003366; /* Azul Institucional */
            --secondary-color: #8A1538; /* Rojo Quemado */
            --accent-color: #D4AF37; /* Dorado */
            --bg-light: #f4f6f9;
            --text-dark: #2c3e50;
        }

        body { font-family: 'Lato', sans-serif; background-color: var(--bg-light); color: var(--text-dark); }
        h1, h2, h3, h4, h5, h6 { font-family: 'Montserrat', sans-serif; }

        /* HERO HEADER */
        .hero-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #001a33 100%);
            color: white;
            padding: 3rem 0 5rem 0;
            position: relative;
        }
        .btn-access {
            background-color: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            transition: all 0.3s;
        }
        .btn-access:hover { background-color: white; color: var(--primary-color); transform: translateY(-2px); }

        /* NOTICE BOARD */
        .notice-board {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            margin-top: -40px;
            position: relative;
            z-index: 10;
            border-left: 5px solid var(--accent-color);
            overflow: hidden;
        }

        /* CARDS GRID */
        .section-card {
            background: white;
            border: none;
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            height: 100%;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: var(--text-dark);
            display: block;
            border-bottom: 3px solid transparent;
        }
        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 25px rgba(0,51,102,0.1);
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
        }
        .icon-circle {
            width: 70px;
            height: 70px;
            background-color: #eef2f5;
            color: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin: 0 auto 1.5rem auto;
            transition: background 0.3s, color 0.3s;
        }
        .section-card:hover .icon-circle { background-color: var(--primary-color); color: white; }

        /* BUZ√ìN FLOTANTE */
        .buzon-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--secondary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            font-size: 1.5rem;
            z-index: 1000;
            transition: transform 0.3s;
            cursor: pointer;
            border: none;
        }
        .buzon-btn:hover { transform: scale(1.1); background-color: #6d102b; color: white; }

        /* IA MODAL STYLES */
        .chat-msg-user { text-align: right; margin-bottom: 10px; }
        .chat-msg-user span { background-color: var(--primary-color); color: white; padding: 8px 12px; border-radius: 15px 15px 0 15px; display: inline-block; }
        .chat-msg-ai { text-align: left; margin-bottom: 10px; }
        .chat-msg-ai div { background-color: #f1f3f5; padding: 10px 15px; border-radius: 15px 15px 15px 0; display: inline-block; border: 1px solid #dee2e6; }
        
        /* FOOTER CORREGIDO */
        footer { 
            background-color: var(--primary-color); /* Azul Institucional */
            color: white; 
            padding: 3rem 0; 
            font-size: 0.85rem; 
            border-top: 5px solid var(--accent-color); /* L√≠nea dorada superior */
        }
        .footer-link { color: rgba(255,255,255,0.7); text-decoration: none; border-bottom: 1px dashed rgba(255,255,255,0.4); }
        .footer-link:hover { color: white; border-bottom-color: white; }
    </style>
</head>
<body>

    <header class="hero-header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-start mb-4">
                <div class="d-flex align-items-center">
                    <i class="fas fa-university fa-2x me-3 text-warning"></i>
                    <div>
                        <small class="text-uppercase text-white-50 fw-bold" style="font-size: 0.7rem; letter-spacing: 1px;">Comit√© Estudiantil 2025-2026</small>
                        <h1 class="h4 m-0 fw-bold">M√âDICO CIRUJANO UNICH</h1>
                    </div>
                </div>
                <button onclick="irALogin()" class="btn btn-access rounded-pill px-4 py-2 fw-bold">
                    <i class="fas fa-user-graduate me-2"></i>Acceso Alumnos
                </button>
            </div>
            <div class="row mt-4">
                <div class="col-lg-10">
                    <h1 class="display-4 hero-title mb-3 fw-bold">Centro de Recursos Acad√©micos</h1>
                    <p class="lead hero-subtitle">Plataforma oficial de gesti√≥n acad√©mica del comit√© estudiantil de la licenciatura en m√©dico cirujano programada por y para estudiantes.</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="notice-board p-4">
            <div class="row align-items-center">
                <div class="col-md-3 border-end border-light text-center text-md-start mb-3 mb-md-0">
                    <h6 class="text-primary fw-bold text-uppercase mb-1"><i class="fas fa-bullhorn me-2"></i>Tablero Oficial</h6>
                    <small class="text-muted">Avisos en tiempo real</small>
                </div>
                <div class="col-md-9">
                    <div id="avisoCarrusel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="6000">
                        <div class="carousel-inner">
                            
                            <div class="carousel-item active">
                                <div class="d-flex align-items-start">
                                    <span class="badge bg-danger me-3 mt-1">URGENTE</span>
                                    <div>
                                        <p class="mb-1 fw-bold text-dark">Uso Obligatorio de Cubrebocas</p>
                                        <p class="mb-0 text-muted small">
                                            A toda la comunidad acad√©mica: ante el incremento de casos de influenza, COVID-19 y Sarampi√≥n se establece el uso OBLIGATORIO de cubrebocas dentro de las instalaciones.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="carousel-item">
                                <div class="d-flex align-items-start">
                                    <span class="badge bg-primary me-3 mt-1">AVISO</span>
                                    <div>
                                        <p class="mb-1 fw-bold text-dark">Inicio del Periodo Enero - Julio 2026</p>
                                        <p class="mb-0 text-muted small">
                                            ¬°Te deseamos √©xito en tu inicio a clases! Puedes verificar el calendario escolar 
                                            <a href="https://drive.google.com/file/d/14PhEUvDw1AX1kfCXUNtm3qdNpi9QWXLI/view?usp=sharing" target="_blank" class="text-primary fw-bold">haciendo clic aqu√≠</a>.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="carousel-item">
                                <div class="d-flex align-items-start">
                                    <span class="badge bg-success me-3 mt-1">VOLUNTARIADO</span>
                                    <div>
                                        <p class="mb-1 fw-bold text-dark">Programa de Tutor Voluntario</p>
                                        <p class="mb-0 text-muted small">
                                            ¬øDeseas apoyar a compa√±eros de nuevo ingreso? Inscr√≠bete en el programa de tutor√≠as acad√©micas. (Ver secci√≥n abajo).
                                        </p>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="container my-5 py-4">
        <div class="row g-4 justify-content-center">
            
            <div class="col-md-6 col-lg-4">
                <a href="#" onclick="abrirIA()" class="section-card shadow-sm border-primary">
                    <div class="icon-circle" style="background-color: #f0f2f5; color: #000;">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h5 class="fw-bold text-primary">Dr. Evidence (IA)</h5>
                    <p class="small text-muted mb-0">Agente Inteligente para tutor√≠a acad√©mica o simulaci√≥n de casos cl√≠nicos ¬°Totalmente gratuito y sin necesidad de registrarse!</p>
                    <span class="badge bg-dark mt-2">Activo 24/7</span>
                </a>
            </div>

            <div class="col-md-6 col-lg-4">
                <a href="libros.html" class="section-card shadow-sm">
                    <div class="icon-circle"><i class="fas fa-book-medical"></i></div>
                    <h5 class="fw-bold">Libros y Bibliograf√≠a</h5>
                    <p class="small text-muted mb-0">Acceso digital a bibliograf√≠a por semestre, cat√°logo completo de GPCs, GRR, Manuales CTO y AMIR ¬°Puedes descargar tus libros o visualizarlos en l√≠nea!</p>
                </a>
            </div>

            <div class="col-md-6 col-lg-4">
                <a href="#" onclick="abrirModalTutorias()" class="section-card shadow-sm">
                    <div class="icon-circle text-success" style="background-color: #e8f5e9;"><i class="fas fa-users"></i></div>
                    <h5 class="fw-bold">Programa de Tutor√≠as</h5>
                    <p class="small text-muted mb-0">Conectamos compa√±eros que tienen dudas con tutores que desean apoyar. ¬°Inscr√≠bete aqu√≠!</p>
                </a>
            </div>

            <div class="col-md-6 col-lg-4">
                <a href="#" onclick="alert('Requiere inicio de sesi√≥n.')" class="section-card shadow-sm">
                    <div class="icon-circle"><i class="fas fa-calculator"></i></div>
                    <h5 class="fw-bold">Calculadoras y Escalas</h5>
                    <p class="small text-muted mb-0">Dosis pedi√°tricas, Glasgow, APGAR, Silverman.</p>
                </a>
            </div>

            <div class="col-md-6 col-lg-4">
                <a href="#" onclick="alert('Pr√≥ximamente.')" class="section-card shadow-sm">
                    <div class="icon-circle"><i class="fas fa-hand-holding-heart"></i></div>
                    <h5 class="fw-bold">Medicina Intercultural</h5>
                    <p class="small text-muted mb-0">Gu√≠as de trato digno y medicina tradicional.</p>
                </a>
            </div>

            <div class="col-md-6 col-lg-4">
                <a href="#" onclick="alert('Pr√≥ximamente.')" class="section-card shadow-sm">
                    <div class="icon-circle"><i class="fas fa-stethoscope"></i></div>
                    <h5 class="fw-bold">Actualizaci√≥n M√©dica</h5>
                    <p class="small text-muted mb-0">Art√≠culos recientes, nuevas GPC y boletines.</p>
                </a>
            </div>

            <div class="col-md-6 col-lg-4">
                <a href="#" onclick="alert('Pr√≥ximamente.')" class="section-card shadow-sm">
                    <div class="icon-circle"><i class="fas fa-balance-scale"></i></div>
                    <h5 class="fw-bold">Legislaci√≥n Universitaria</h5>
                    <p class="small text-muted mb-0">Derechos universitarios y reglamento interno.</p>
                </a>
            </div>

        </div>
    </section>

    <button class="buzon-btn" onclick="alert('Buz√≥n de Contacto: \n\nPr√≥ximamente podr√°s enviar tus sugerencias o quejas directamente al Comit√© por este medio.')">
        <i class="fas fa-envelope-open-text"></i>
    </button>

    <footer class="text-center mt-5">
        <div class="container">
            <p class="mb-2 fw-bold text-white">Comit√© Estudiantil de la Lic. de M√©dico Cirujano de la Universidad Intercultural de Chiapas</p>
            <p class="text-white-50 extra-small">Material de uso exclusivo para consulta acad√©mica.</p>
            
            <p class="text-white-50 extra-small mt-2" style="font-size: 0.75rem; max-width: 800px; margin: 0 auto; line-height: 1.4;">
                <strong>Aviso Legal:</strong> Esta plataforma es una iniciativa independiente desarrollada por estudiantes para estudiantes. No constituye un canal oficial de comunicaci√≥n de la Universidad Intercultural de Chiapas. Las siglas "UNICH" se utilizan aqu√≠ exclusivamente como referencia geogr√°fica y demogr√°fica para la comunidad estudiantil, sin relaci√≥n con la administraci√≥n central ni uso de la identidad corporativa institucional.
            </p>

            <div class="mt-3">
                <a href="mailto:comiteestudiantilmedicina@unich.edu.mx" class="text-decoration-none small text-warning fw-bold">Contacto y Soporte</a>
            </div>
            
            <div class="d-inline-block border-top border-white-50 pt-3 mt-3">
                <a href="#" class="footer-link me-3" onclick="alert('Aviso de Privacidad en construcci√≥n.')">Aviso de Privacidad</a>
                <a href="#" class="footer-link">Tratamiento de Datos Personales</a>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="iaModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title"><i class="fas fa-brain me-2 text-warning"></i>Dr. Evidence</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body bg-light">
                    <div id="chatHistory" class="p-3 mb-3 bg-white rounded shadow-sm" style="height: 350px; overflow-y: auto;">
                        <div class="text-center mt-3">
                            <i class="fas fa-robot fa-3x text-primary mb-3"></i>
                            <p class="fw-bold text-dark">¬°Soy Dr. Evidence!</p>
                            <p class="text-muted small px-4">
                                Su agente IA enfocado en medicina, listo para actuar como su tutor acad√©mico o brindarle casos cl√≠nicos, seleccione el modo seg√∫n lo necesite.
                            </p>
                            <div class="mt-3">
                                <button class="btn btn-sm btn-outline-primary me-2" onclick="setMode('Tutor')">üë®‚Äçüè´ Tutor Acad√©mico</button>
                                <button class="btn btn-sm btn-outline-success" onclick="setMode('Clinico')">üè• Caso Cl√≠nico</button>
                            </div>
                        </div>
                    </div>
                    <div class="input-group">
                        <input type="text" id="iaQuery" class="form-control" placeholder="Escriba su consulta..." onkeypress="if(event.key === 'Enter') consultarIA()">
                        <button class="btn btn-primary" onclick="consultarIA()"><i class="fas fa-paper-plane"></i></button>
                    </div>
                    <small class="text-muted d-block text-center mt-2" style="font-size: 0.7rem;">Powered by Groq ‚Ä¢ Llama 3.3 Versatile</small>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="tutoriasModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title fw-bold"><i class="fas fa-hands-helping me-2"></i>Programa de Tutor√≠as</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center p-4">
                    <p class="lead mb-4">¬øC√≥mo deseas participar?</p>
                    <div class="d-grid gap-3">
                        <a href="https://forms.gle/5nmtbRMxgHHxkLNS8" target="_blank" class="btn btn-outline-success btn-lg fw-bold">
                            <i class="fas fa-chalkboard-teacher me-2"></i>Deseo ser Tutor Voluntario
                        </a>
                        <a href="https://forms.gle/xuMRwdND5faAC4QZA" target="_blank" class="btn btn-outline-primary btn-lg fw-bold">
                            <i class="fas fa-user-graduate me-2"></i>Deseo recibir Tutor√≠a
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ----------------------------------------------------
        // FUNCIONES DEL SISTEMA
        // ----------------------------------------------------
        const GROQ_API_KEY = "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"; 
        
        function abrirIA() { new bootstrap.Modal(document.getElementById('iaModal')).show(); }
        function abrirModalTutorias() { new bootstrap.Modal(document.getElementById('tutoriasModal')).show(); }
        
        function setMode(modo) {
            const input = document.getElementById('iaQuery');
            if(modo === 'Tutor') {
                input.value = "Act√∫a como mi tutor acad√©mico y expl√≠came el siguiente tema: ";
            } else {
                input.value = "Genera un caso cl√≠nico pedi√°trico desafiante para un estudiante de 8vo semestre, incluye signos vitales y pregunta por el diagn√≥stico.";
            }
            input.focus();
        }

        async function consultarIA() {
            const input = document.getElementById('iaQuery');
            const chatBox = document.getElementById('chatHistory');
            const pregunta = input.value.trim();
            
            if(!pregunta) return;

            // 1. Mostrar mensaje del usuario
            chatBox.innerHTML += `<div class="chat-msg-user"><span>${pregunta}</span></div>`;
            input.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;

            // 2. Indicador de carga
            const loadId = "loader-" + Date.now();
            chatBox.innerHTML += `<div id="${loadId}" class="text-muted small ms-2"><i class="fas fa-spinner fa-spin"></i> Analizando evidencia...</div>`;
            chatBox.scrollTop = chatBox.scrollHeight;

            try {
                // 3. Petici√≥n a Groq
                const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${GROQ_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "llama-3.3-70b-versatile",
                        messages: [
                            { role: "system", content: "Eres Dr. Evidence, un asistente m√©dico acad√©mico. Responde con precisi√≥n, usa terminolog√≠a m√©dica correcta y formato claro (listas, negritas)." },
                            { role: "user", content: pregunta }
                        ],
                        temperature: 0.7
                    })
                });

                // 4. Procesar respuesta
                const data = await response.json();
                document.getElementById(loadId).remove();

                if (response.ok && data.choices) {
                    let rawText = data.choices[0].message.content;
                    let formattedText = rawText
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\n/g, '<br>');
                    
                    chatBox.innerHTML += `<div class="chat-msg-ai"><div>${formattedText}</div></div>`;
                } else {
                    console.error("Error API:", data);
                    chatBox.innerHTML += `<div class="text-danger small ms-2"><i class="fas fa-exclamation-triangle"></i> Error: ${data.error?.message || "Modelo retirado o error de servicio."}</div>`;
                }

            } catch (error) {
                if(document.getElementById(loadId)) document.getElementById(loadId).remove();
                chatBox.innerHTML += `<div class="text-danger small ms-2"><i class="fas fa-wifi"></i> Error de conexi√≥n.</div>`;
            }
            
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function irALogin() { 
            // Esto conecta la Portada con la Plataforma
            window.location.href = 'plataforma.html';
        }
    </script>
</body>
</html>
